{
    "template_id": "gpt-site-admin",
    "name": "GPT Site Admin",
    "description": "This GPT-powered bot assists in managing WordPress sites by utilizing PHP and WordPress functions, it efficiently accesses and modifies site data as necessary.",
    "service": {
        "convo_service_version": 40,
        "packages": [
            "convo-core",
            "convo-gpt",
            "convo-wp-core"
        ],
        "contexts": [],
        "variables": {
            "GPT_API_KEY": "sk-",
            "DEFAULT_TEMPERATURE": "${0.1}",
            "DEFAULT_MAX_TOKENS": "${4096}",
            "DEFAULT_MODEL": "gpt-4o",
            "MAX_MESSAGES_TOKENS": "${8000}",
            "TRUNCATE_TO_TOKENS": "${6000}",
            "MAX_EXECUTION_TIME": "${600}",
            "MAX_FUNCTION_RESULT_SIZE": "${4096}"
        },
        "preview_variables": [],
        "entities": [],
        "intents": [],
        "blocks": [
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ConversationBlock",
                "namespace": "convo-core",
                "properties": {
                    "block_id": "3977ff45-8e2f-4fb8-a00b-e24c391ce323",
                    "role": "conversation_block",
                    "name": "Home",
                    "elements": [
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\ReadElementsFragment",
                            "namespace": "convo-core",
                            "properties": {
                                "fragment_id": "Inc_Check_API_Key",
                                "_component_id": "cveakoja-56ai-aody-gied-dl9fgehdwcal"
                            }
                        },
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                            "namespace": "convo-core",
                            "properties": {
                                "parameters": "service",
                                "scope_type": "session",
                                "properties": {
                                    "TOKEN_USAGE": "${{\"total\": 0, \"input\": 0, \"output\": 0}}"
                                },
                                "_component_id": "uqagbriq-0bl5-ki1c-jukw-pokucq9pvpxz"
                            }
                        },
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\ElementRandomizer",
                            "namespace": "convo-core",
                            "properties": {
                                "name": "Welcome message",
                                "mode": "wild",
                                "elements": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "request",
                                            "parameters": "service",
                                            "properties": {
                                                "WELCOME": "Hi, how can I help today?"
                                            },
                                            "_component_id": "grhrbuxx-givj-yq3k-j2oh-61brvqhhib3e"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "request",
                                            "parameters": "service",
                                            "properties": {
                                                "WELCOME": "Welcome! How may I assist you?"
                                            },
                                            "_component_id": "xwksa03b-7dwq-3fty-scgf-fuddzfthcqog"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "request",
                                            "parameters": "service",
                                            "properties": {
                                                "WELCOME": "Hey there! What can I do for you?"
                                            },
                                            "_component_id": "lnnuqugj-murh-0rjg-3off-jmqebrvnwrn2"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "request",
                                            "parameters": "service",
                                            "properties": {
                                                "WELCOME": "Hello! How can I make your day easier?"
                                            },
                                            "_component_id": "ru20s2x8-zbse-uzmm-pw1o-chqnssubelsd"
                                        }
                                    }
                                ],
                                "loop": true,
                                "is_repeat": "",
                                "scope_type": "installation",
                                "_component_id": "5xvkztcq-4agq-abtc-ykkb-rxoycy97sjp4"
                            }
                        },
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                            "namespace": "convo-core",
                            "properties": {
                                "scope_type": "request",
                                "parameters": "service",
                                "properties": {
                                    "message[\"role\"]": "assistant",
                                    "message[\"content\"]": "${WELCOME}"
                                },
                                "_component_id": "pv0oblha-twvk-jguh-gx0k-xpbwuibhqk3j"
                            }
                        },
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                            "namespace": "convo-core",
                            "properties": {
                                "scope_type": "session",
                                "parameters": "service",
                                "properties": {
                                    "messages": "${[message]}"
                                },
                                "_component_id": "ku1iy4s7-rkrj-jw2i-dd2g-t5n4acledmhz"
                            }
                        },
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\TextResponseElement",
                            "namespace": "convo-core",
                            "properties": {
                                "type": "default",
                                "text": "${messages[count(messages)-1][\"content\"]}",
                                "append": false,
                                "alexa_domain": "normal",
                                "alexa_emotion": "neutral",
                                "alexa_emotion_intensity": "medium",
                                "_component_id": "g0o1gc6v-ink1-ovka-ree5-lr7xhmbvr77n"
                            }
                        }
                    ],
                    "processors": [
                        {
                            "class": "\\Convo\\Pckg\\Core\\Processors\\SimpleProcessor",
                            "namespace": "convo-core",
                            "properties": {
                                "name": "Chat App",
                                "ok": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\ReadElementsFragment",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "fragment_id": "Inc_Check_API_Key",
                                            "_component_id": "rngde1aw-pah1-jrz7-o5vq-ayxdc8xmnaue"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "request",
                                            "parameters": "service",
                                            "properties": {
                                                "user_message[\"role\"]": "user",
                                                "user_message[\"content\"]": "${trim( request.text)}"
                                            },
                                            "_component_id": "rtqncpoo-5h4f-absp-rusj-s5udtey4jg9z"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "session",
                                            "parameters": "service",
                                            "properties": {
                                                "messages": "${array_merge( messages, [user_message])}"
                                            },
                                            "_component_id": "incqqcd1-sl0c-qrhe-rovv-fkoihkw1uvyq"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\ReadElementsFragment",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "fragment_id": "Chat_Completion",
                                            "_component_id": "p2pvtnjf-awyq-925g-kiam-oa2r4x3ozav6"
                                        }
                                    }
                                ],
                                "request_filters": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Filters\\NopRequestFilter",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "empty": "match",
                                            "values": [],
                                            "_component_id": "hebve7se-qias-siwq-m1vq-h9vxempsezh6"
                                        }
                                    }
                                ],
                                "_component_id": "653ntuwl-bvk1-cnzu-45nj-ll3bq6sefm7t"
                            }
                        }
                    ],
                    "fallback": [],
                    "_component_id": "0f89fe24-f387-452e-b492-d120b77f32e0"
                }
            },
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ConversationBlock",
                "namespace": "convo-core",
                "properties": {
                    "role": "error_handler",
                    "block_id": "Error_handler",
                    "name": "Error handler",
                    "pre_dispatch": [],
                    "elements": [
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\TextResponseElement",
                            "namespace": "convo-core",
                            "properties": {
                                "type": "default",
                                "text": "Error occurred. ${error.getMessage()}",
                                "append": false,
                                "alexa_domain": "normal",
                                "alexa_emotion": "neutral",
                                "alexa_emotion_intensity": "medium",
                                "_component_id": "agqkkd4i-xhos-jz7n-fuwo-yxb0ahv2rpuk"
                            }
                        }
                    ],
                    "processors": [],
                    "fallback": [],
                    "_component_id": "ofghljir-8yji-ddv7-a290-emljnn5sgmcp"
                }
            }
        ],
        "fragments": [
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ElementsFragment",
                "namespace": "convo-core",
                "properties": {
                    "fragment_id": "Chat_Completion",
                    "name": "Chat Completion",
                    "elements": [
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                            "namespace": "convo-core",
                            "properties": {
                                "scope_type": "request",
                                "parameters": "service",
                                "properties": {
                                    "user": "${wp_get_current_user()}",
                                    "ret": "${set_time_limit(MAX_EXECUTION_TIME)}"
                                },
                                "_component_id": "svkhergn-v9cc-vqcy-rmmk-r8r4gmf9nsjh"
                            }
                        },
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\ChatCompletionV2Element",
                            "namespace": "convo-gpt",
                            "properties": {
                                "result_var": "status",
                                "api_key": "${GPT_API_KEY}",
                                "apiOptions": {
                                    "model": "${DEFAULT_MODEL}",
                                    "temperature": "${DEFAULT_TEMPERATURE}",
                                    "max_tokens": "${DEFAULT_MAX_TOKENS}"
                                },
                                "ok": [],
                                "_component_id": "rcb23gtx-fptt-m4oa-5t8z-auwr1pi6cgfw",
                                "functions": [],
                                "message_provider": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\ReadElementsFragment",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "fragment_id": "Chat_Context_Main_Prompt",
                                            "_component_id": "xo83rqr7-gznv-3lgg-2ohm-7hjets6gillg"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\IfElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "test": "${current_user_can(\"administrator\")}",
                                            "then": [
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\ReadElementsFragment",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "fragment_id": "Chat_Context_System_Information",
                                                        "_component_id": "af90myez-tpjc-t5at-z3rd-g1mhngpswi6n"
                                                    }
                                                },
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\ReadElementsFragment",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "fragment_id": "Chat_Context_Additional_Instructions",
                                                        "_component_id": "1o5gbaq7-etsr-7s0b-jjyl-oss4dxkki6mx"
                                                    }
                                                },
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\ReadElementsFragment",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "fragment_id": "Chat_Context_Functions",
                                                        "_component_id": "evwj92dw-wcdc-pqlv-yv4i-7uruswo8ordi"
                                                    }
                                                }
                                            ],
                                            "else_if": [],
                                            "else": [],
                                            "_component_id": "qxqj6dto-7x1o-qoes-hmto-ewajwkhkpnkx"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Gpt\\Pckg\\SimpleMessagesLimiterElement",
                                        "namespace": "convo-gpt",
                                        "properties": {
                                            "max_count": "${MAX_MESSAGES}",
                                            "truncate_to": "${TRUNCATE_TO}",
                                            "message_provider": [
                                                {
                                                    "class": "\\Convo\\Gpt\\Pckg\\ConversationMessagesElement",
                                                    "namespace": "convo-gpt",
                                                    "properties": {
                                                        "messages": "${messages}",
                                                        "_component_id": "7ais28yz-ad4o-vu32-8qko-s2d6y1cbsqac"
                                                    }
                                                }
                                            ],
                                            "_component_id": "xshgptwh-9nmy-7ii3-9a8z-ieyv6vylftjv",
                                            "truncated_flow": [
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\LogElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "log_message": "Truncated ${count( status.truncated)} messages",
                                                        "log_level": "info",
                                                        "disable_test_view": false,
                                                        "_component_id": "wujkwnrb-nkrh-ev5s-amnh-cqtactzqcr5d"
                                                    }
                                                },
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "scope_type": "session",
                                                        "parameters": "service",
                                                        "properties": {
                                                            "messages": "${status.messages}"
                                                        },
                                                        "_component_id": "fgwycrzl-taxx-ac70-hqvc-uqalw5rhdiax"
                                                    }
                                                }
                                            ],
                                            "result_var": "status",
                                            "max_tokens": "${MAX_MESSAGES_TOKENS}",
                                            "truncate_to_tokens": "${TRUNCATE_TO_TOKENS}"
                                        }
                                    }
                                ],
                                "new_message_flow": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\IfElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "test": "${status.last_message.role === 'assistant'}",
                                            "then": [
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "parameters": "service",
                                                        "scope_type": "session",
                                                        "properties": {
                                                            "TOKEN_USAGE[\"total\"]": "${TOKEN_USAGE[\"total\"] + status.response.usage.total_tokens}"
                                                        },
                                                        "_component_id": "jgzrhc2c-h9ef-31jl-s13f-15wjfijfqsg9"
                                                    }
                                                },
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\LogElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "log_message": "Current usage: ${status.response.usage.total_tokens}\nTotal usage ${TOKEN_USAGE[\"total\"]}",
                                                        "log_level": "info",
                                                        "disable_test_view": false,
                                                        "_component_id": "g7be7zra-qmp0-xld8-ipog-mgczba1ygbzw"
                                                    }
                                                }
                                            ],
                                            "else_if": [],
                                            "else": [],
                                            "_component_id": "ghwcio7f-jwiu-kq0k-mpva-2gjuuqlcwx1l"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\IfElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "test": "${status.last_message.tool_calls}",
                                            "then": [
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\IfElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "test": "${status.last_message.content}",
                                                        "then": [
                                                            {
                                                                "class": "\\Convo\\Pckg\\Core\\Elements\\TextResponseElement",
                                                                "namespace": "convo-core",
                                                                "properties": {
                                                                    "type": "default",
                                                                    "text": "${status.last_message.content}",
                                                                    "append": false,
                                                                    "alexa_domain": "normal",
                                                                    "alexa_emotion": "neutral",
                                                                    "alexa_emotion_intensity": "medium",
                                                                    "_component_id": "vzmwwgum-omq0-i55p-mnkw-hlslayr1jwlc"
                                                                }
                                                            }
                                                        ],
                                                        "else_if": [],
                                                        "else": [],
                                                        "_component_id": "010foavn-0gks-ntq1-hyoy-levpl80aggkj"
                                                    }
                                                },
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\LoopElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "name": null,
                                                        "data_collection": "${status.last_message.tool_calls}",
                                                        "item": "item",
                                                        "elements": [
                                                            {
                                                                "class": "\\Convo\\Pckg\\Core\\Elements\\LogElement",
                                                                "namespace": "convo-core",
                                                                "properties": {
                                                                    "log_message": "ID: ${item.value.id}\n${item.value.function.name}( \n${item.value.function.arguments}\n)",
                                                                    "log_level": "info",
                                                                    "disable_test_view": false,
                                                                    "_component_id": "dn9ilhpu-gij6-irom-vuwx-k29oqn9d2p16"
                                                                }
                                                            }
                                                        ],
                                                        "offset": null,
                                                        "limit": null,
                                                        "loop_until": "",
                                                        "_component_id": "jqviswwp-s50a-negh-spf9-2ef1wkybw7wr"
                                                    }
                                                }
                                            ],
                                            "else_if": [
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\ElseIfElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "test": "${status.last_message.role === 'tool'}",
                                                        "then": [
                                                            {
                                                                "class": "\\Convo\\Pckg\\Core\\Elements\\LogElement",
                                                                "namespace": "convo-core",
                                                                "properties": {
                                                                    "log_message": "${status.last_message.tool_call_id} => ${status.last_message.content}",
                                                                    "log_level": "info",
                                                                    "disable_test_view": false,
                                                                    "_component_id": "zdblrvvd-hgq5-hufz-h7um-7279br1yqtis"
                                                                }
                                                            }
                                                        ],
                                                        "_component_id": "sgcpelum-2g9k-mr4r-2lkp-auzuxktifymy"
                                                    }
                                                }
                                            ],
                                            "else": [
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\TextResponseElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "type": "default",
                                                        "text": "${status.last_message.content}",
                                                        "append": false,
                                                        "alexa_domain": "normal",
                                                        "alexa_emotion": "neutral",
                                                        "alexa_emotion_intensity": "medium",
                                                        "_component_id": "wrdjv9hq-krzd-htkm-pnyz-3ziw8ndckacp"
                                                    }
                                                }
                                            ],
                                            "_component_id": "iaexotrw-htpg-fj72-rapz-vn68u3pvyhvr"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "session",
                                            "parameters": "service",
                                            "properties": {
                                                "messages[${count(messages)}]": "${status.last_message}"
                                            },
                                            "_component_id": "dpe2raif-t8lw-n2ng-bsar-ijould0yg87m"
                                        }
                                    }
                                ],
                                "max_func_result_tokens": "${MAX_FUNCTION_RESULT_SIZE}"
                            }
                        }
                    ],
                    "_component_id": "6gp4wdco-0hwt-vdds-anzo-wxkc8o8iq9jq"
                }
            },
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ElementsFragment",
                "namespace": "convo-core",
                "properties": {
                    "fragment_id": "Chat_Context_Main_Prompt",
                    "name": "Chat Context - Main Prompt",
                    "elements": [
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                            "namespace": "convo-gpt",
                            "properties": {
                                "content": "You are an advanced AI, intimately integrated within the WordPress and PHP ecosystem, executing operations with precision across a spectrum of system resources.\n\n### **Utilization of Contextual Information**\n\n-   Utilize available contextual information efficiently, ensuring it's current and accurate to maintain operational reliability and effectiveness.\n\n### **Effective Communication**\n\n-   Maintain concise yet comprehensive interactions, mindful of token limits and using historical data for enriched communication and task execution.\n\n### **Operation Logging**\n\n-   Concentrate on logging and including in responses, essential outcomes from each operation. Ensure that generated or utilized IDs, URLs, and paths are accurately logged for enhanced transparency and traceability.      \n\n### **Function Execution**\n\n-   **Function Utilization:** Execute recognized functions from the PHP core, loaded extensions, WordPress core, and plugins, ensuring they are available within the operational environment.\n-   **Error Handling:** Identify and respond to operational errors promptly, providing clear error messages for streamlined issue resolution.\n-   **Strategic Planning:** Plan operations thoughtfully, preemptively acquiring essential data such as IDs to facilitate smooth workflows.\n-   **Optimization:** In post-heavy environments, execute functions discerningly to optimize data retrieval and manipulation efficiency.\n\n### **JSON Handling**\n\n-   Process JSON returns natively, avoiding additional decoding operations.  \n    **Example:** Avoid invoking `json_decode()` function or using `array_slice()` to reduce JSON array responses.\n\n---\n\n_Note: Additional context will follow with specific, up-to-date information to guide the operation further._",
                                "_component_id": "xwpxxfma-xdt2-h7db-s0ve-8ncslhmzatgb"
                            }
                        }
                    ],
                    "_component_id": "pksohovv-tvga-rlop-oz9b-6rgvrwqrkl4j"
                }
            },
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ElementsFragment",
                "namespace": "convo-core",
                "properties": {
                    "fragment_id": "Chat_Context_System_Information",
                    "name": "Chat Context - System Information",
                    "elements": [
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                            "namespace": "convo-core",
                            "properties": {
                                "scope_type": "request",
                                "parameters": "service",
                                "properties": {
                                    "phpversion": "${call_user_func(\"phpversion\")}"
                                },
                                "_component_id": "fei1ljyq-3n9a-xv2z-hwbu-u5yfhya85dp4"
                            }
                        },
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                            "namespace": "convo-gpt",
                            "properties": {
                                "content": "## Additional Context: The current user information\n\nThe User is logged in and here is some basic info:\n\n* user id: ${user.ID}\n* name: ${user.data.user_nicename}\n* email: ${user.data.user_email}",
                                "_component_id": "dwyod3cb-trvx-k1wh-zyg9-wyrz3thvpl98"
                            }
                        },
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                            "namespace": "convo-gpt",
                            "properties": {
                                "content": "## Additional Context: Date and Time\n\n-   Today is ${date('l jS F Y')}\n-   Tomorrow is ${date('l jS F Y', strtotime('tomorrow'))}\n-   Current time is ${date('h:i:s A')}",
                                "_component_id": "hpqp5xfz-gjnc-0tac-badb-n5nzpzfppee1"
                            }
                        },
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                            "namespace": "convo-gpt",
                            "properties": {
                                "content": "## Additional Context: Website system info:\n\n* home_url: `${home_url()}`\n* ABSPATH: `${ constant( \"ABSPATH\")}`\n* website name: **${ wp_call_user_func( 'get_bloginfo', ['name'] )}**\n* PHP version: `${phpversion}`\n* WPDB prefix: `${ wp_call_user_func_array( ['$wpdb', 'get_blog_prefix'] )}`\n\n### Active theme\n\nslug: ${wp_call_user_func( \"get_template\")}",
                                "_component_id": "sp19eyie-nfvy-qt97-tenw-mdxkr9v1qp5y"
                            }
                        }
                    ],
                    "_component_id": "tc9oi4yv-iyca-k69f-p9fx-sh8aztiblmpq"
                }
            },
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ElementsFragment",
                "namespace": "convo-core",
                "properties": {
                    "fragment_id": "Chat_Context_Additional_Instructions",
                    "name": "Chat Context - Additional Instructions",
                    "elements": [
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\SystemMessageGroupElement",
                            "namespace": "convo-gpt",
                            "properties": {
                                "trim_children": false,
                                "message_provider": [
                                    {
                                        "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                                        "namespace": "convo-gpt",
                                        "properties": {
                                            "content": "## Additional Context: Specific Tasks Instructions",
                                            "_component_id": "hhabfj28-fwis-m8wf-89pv-plhr3ker1nso"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                                        "namespace": "convo-gpt",
                                        "properties": {
                                            "content": "### Setting Images as Featured\n\nWhen uploading a new image from a URL using the `media_sideload_image()` function, ensure that you set the `return_type` to `id`. This approach allows you to obtain an attachment ID, which is essential for performing subsequent operations on the uploaded image. \n\nTo assign the uploaded image as a featured thumbnail to a specific post, use the set_post_thumbnail() function.",
                                            "_component_id": "oc3euq94-1d6h-fthc-31qi-uuppny6qbfzm"
                                        }
                                    }
                                ],
                                "_component_id": "igiu5p4o-hp7d-ztau-zhrk-5gqi8muzfgva"
                            }
                        }
                    ],
                    "_component_id": "tsa96ry3-snpm-hmb1-clby-47j1wftozcrl"
                }
            },
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ElementsFragment",
                "namespace": "convo-core",
                "properties": {
                    "fragment_id": "Chat_Context_Functions",
                    "name": "Chat Context - Functions",
                    "elements": [
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\ChatFunctionElement",
                            "namespace": "convo-gpt",
                            "properties": {
                                "name": "call_user_func_array",
                                "description": "This function stands as a potent gateway, enabling dynamic interaction with the live WordPress and PHP environment. It skillfully encapsulates PHP's native `call_user_func_array()` function, allowing for the direct invocation of PHP functions with an array of arguments, thereby harnessing PHP\u2019s innate capabilities and reflecting immediate changes within the system's operational sphere.\n\nEvery execution will return a JSON object, always featuring a `function_result` field, encapsulating the function's return value. This structured return format ensures a standardized, readable output, simplifying subsequent processing and interpretation.\n\nWhen a function execution concludes due to a thrown exception, the return value will be a JSON object. The exception message can be accessed through the 'error' field in this JSON object.\n\n**Optional Arguments:** When invoking functions or methods, especially those with optional parameters, prefer omitting arguments rather than explicitly setting them to `null` unless `null` has a specific meaning in the context of the function or method. This is very important, because in many cases `null` will not change into default value, unless argument is completely skipped. \nFor example when calling `get_results` on `$wpdb`, the second argument should be skipped, because `null` will not default to `OBJECT`.",
                                "parameters": {
                                    "callback": "${{\n  \"oneOf\": [\n    {\n      \"type\": \"string\",\n      \"description\": \"Specifies the name of the global PHP function to be invoked.\"\n    },\n    {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"minItems\": 2,\n      \"maxItems\": 2,\n      \"description\": \"Specifies an array with two elements. The first element is either the name of an object (as a string, e.g., \\\"$wpdb\\\") or a class name. The second element is the method to invoke on that object or class.\"\n    }\n  ],\n  \"description\": \"Specifies the operation to be executed. It can either be a string representing a global PHP function name or an array with two elements. For object method invocations, the first element must be the object name (e.g., \\\"$wpdb\\\" for the WordPress database object), and the second element must be the method name to invoke on that object.\"\n}\n}",
                                    "args": "${{\n        \"type\": \"array\",\n        \"items\": {\n          \"oneOf\": [\n            { \"type\": \"object\" },\n            {\n              \"type\": \"array\",\n              \"items\": {\n                \"oneOf\": [\n                  { \"type\": \"object\" },\n                  { \"type\": \"string\" },\n                  { \"type\": \"number\" },\n                  { \"type\": \"boolean\" },\n                  { \"type\": \"null\" }\n                ]\n              }\n            },\n            { \"type\": \"string\" },\n            { \"type\": \"number\" },\n            { \"type\": \"boolean\" },\n            { \"type\": \"null\" }\n          ]\n        },\n        \"description\": \"Represents an array encapsulating the parameters intended for the specified PHP function. Each element within this array directly corresponds to the arguments accepted by the target function. It\u2019s essential to enclose all parameters within an array to maintain a consistent structure and ensure precise argument delivery, even if there\u2019s only a single argument.\"\n      }}"
                                },
                                "required": "${[\"callback\"]}",
                                "request_data": "data",
                                "result_data": "${function_result}",
                                "ok": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "request",
                                            "parameters": "function",
                                            "properties": {
                                                "function_data": "${[]}",
                                                "function_data[\"function_result\"]": "${wp_call_user_func_array( data.callback, data.args)}"
                                            },
                                            "_component_id": "aabkuvdv-qx7v-cvdr-4dtg-jjuewl42zody"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "scope_type": "request",
                                            "parameters": "function",
                                            "properties": {
                                                "function_result": "${function_data}"
                                            },
                                            "_component_id": "ali8cfjc-mkwg-dch2-4ir5-4x3ntzmgj4bz"
                                        }
                                    }
                                ],
                                "_component_id": "elpyhinh-jnfh-giu3-kr1z-3nu0wob0masc",
                                "defaults": "${{\"args\":[]}}"
                            }
                        },
                        {
                            "class": "\\Convo\\Gpt\\Pckg\\ChatFunctionElement",
                            "namespace": "convo-gpt",
                            "properties": {
                                "name": "generate_post_excerpt",
                                "description": "This function generates and returns an excerpt for the given post.",
                                "parameters": {
                                    "post_id": "${{\"type\": \"number\", \"description\": \"ID of the post that excerpt should be generated for\"}}",
                                    "prompt": "${{\"type\": \"string\", \"description\": \"Additional instruction how excerpt should be formed\"}}"
                                },
                                "defaults": "${{}}",
                                "required": "${[\"post_id\"]}",
                                "request_data": "data",
                                "result_data": "${function_result}",
                                "ok": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "parameters": "function",
                                            "scope_type": "request",
                                            "properties": {
                                                "POST": "${get_post( data.post_id)}"
                                            },
                                            "_component_id": "6qncyhvq-xp2r-bogh-e1q4-ipxpi81ws2xf"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Gpt\\Pckg\\ChatCompletionV2Element",
                                        "namespace": "convo-gpt",
                                        "properties": {
                                            "result_var": "status",
                                            "api_key": "${GPT_API_KEY}",
                                            "apiOptions": {
                                                "model": "${DEFAULT_MODEL}",
                                                "temperature": "${DEFAULT_TEMPERATURE}",
                                                "max_tokens": "${DEFAULT_MAX_TOKENS}"
                                            },
                                            "ok": [],
                                            "_component_id": "cy7tvh12-ynbg-u12q-bcaw-xmohvkkwx410",
                                            "functions": [],
                                            "message_provider": [
                                                {
                                                    "class": "\\Convo\\Gpt\\Pckg\\SystemMessageGroupElement",
                                                    "namespace": "convo-gpt",
                                                    "properties": {
                                                        "trim_children": false,
                                                        "message_provider": [
                                                            {
                                                                "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                                                                "namespace": "convo-gpt",
                                                                "properties": {
                                                                    "content": "You are SEO AI assistant on the WordPress website. Your role is to generate excerpt for a given post.",
                                                                    "_component_id": "d6en9mdh-hrre-fqg2-0jv5-xzajtft2rpjb"
                                                                }
                                                            },
                                                            {
                                                                "class": "\\Convo\\Pckg\\Core\\Elements\\IfElement",
                                                                "namespace": "convo-core",
                                                                "properties": {
                                                                    "test": "${data.prompt}",
                                                                    "then": [
                                                                        {
                                                                            "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                                                                            "namespace": "convo-gpt",
                                                                            "properties": {
                                                                                "content": "${data.prompt}",
                                                                                "_component_id": "fe7xo0od-9snw-nuuo-c3cl-s5zcmnfmnjyr"
                                                                            }
                                                                        }
                                                                    ],
                                                                    "else_if": [],
                                                                    "else": [],
                                                                    "_component_id": "b6owaisl-guuo-hifo-rhpm-88nwgcqsvjuy"
                                                                }
                                                            }
                                                        ],
                                                        "_component_id": "pnba5prl-ekft-bxxk-yuhc-mwv8qcn8q6fh"
                                                    }
                                                },
                                                {
                                                    "class": "\\Convo\\Gpt\\Pckg\\SystemMessageElement",
                                                    "namespace": "convo-gpt",
                                                    "properties": {
                                                        "content": "The post to generate excerpt for:\n\n**${POST.post_title}**\n\n${html_to_markdown( POST.post_content)}",
                                                        "_component_id": "ujhso703-tgsy-4diz-arke-tbdl7awfwcek"
                                                    }
                                                }
                                            ],
                                            "new_message_flow": [
                                                {
                                                    "class": "\\Convo\\Pckg\\Core\\Elements\\SetParamElement",
                                                    "namespace": "convo-core",
                                                    "properties": {
                                                        "scope_type": "session",
                                                        "parameters": "function",
                                                        "properties": {
                                                            "function_result": "${status.last_message.content}"
                                                        },
                                                        "_component_id": "e72k6lvc-mqii-5nil-b6bq-w2sjgnwewkko"
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ],
                                "_component_id": "ymx5jop5-m5j6-p3lk-b3hn-3uk4i3vapok2"
                            }
                        }
                    ],
                    "_component_id": "e9sx4lcu-c0pa-krx7-v8om-j4iurzks1zis"
                }
            },
            {
                "class": "\\Convo\\Pckg\\Core\\Elements\\ElementsFragment",
                "namespace": "convo-core",
                "properties": {
                    "fragment_id": "Inc_Check_API_Key",
                    "name": "Inc - Check API Key",
                    "elements": [
                        {
                            "class": "\\Convo\\Pckg\\Core\\Elements\\IfElement",
                            "namespace": "convo-core",
                            "properties": {
                                "test": "${ empty( GPT_API_KEY)}",
                                "then": [
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\TextResponseElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "type": "default",
                                            "text": "Your GPT API key is not set. Please navigate to the Variables view and enter value for the `GPT_API_KEY` service variable.",
                                            "append": false,
                                            "alexa_domain": "normal",
                                            "alexa_emotion": "neutral",
                                            "alexa_emotion_intensity": "medium",
                                            "_component_id": "edvgxzkv-xsli-flq7-hy6f-x6mbj8a65xwd"
                                        }
                                    },
                                    {
                                        "class": "\\Convo\\Pckg\\Core\\Elements\\EndRequestElement",
                                        "namespace": "convo-core",
                                        "properties": {
                                            "_component_id": "h4b8xw2n-jejm-a2dk-edqo-4up3rk8nvwoi"
                                        }
                                    }
                                ],
                                "else_if": [],
                                "else": [],
                                "_component_id": "ccgm9xlq-dmyg-jf2r-rit2-kkvkve19fypr"
                            }
                        }
                    ],
                    "_component_id": "f7taop8h-bpaj-7krp-y0uu-uls8wbi8nuf4"
                }
            }
        ],
        "properties": []
    }
}
